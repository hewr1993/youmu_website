<!DOCTYPE html>
<html class="no-js" lang="en" ng-app="youmuApp">
    <head lang="en">
        <title>视频点播页</title>
        {% include 'partials/head.html' %}
        <link href="/static/video-js/video-js.css" rel="stylesheet">
        <script src="/static/video-js/video.js"></script>
        <script src="/static/js/CommentCoreLibrary/CommentCoreLibrary.js"></script>
        <script src="/static/js/CommentCoreLibrary/BilibiliFormat.js"></script>
        <link href="/static/css/videojs_ABdm.css" rel="stylesheet">
        <script src="/static/js/videojs_ABdm.js"></script>
        <script src="/static/js/vendor/jquery.js"></script>
        <link href="/static/fonts/foundation-icons.css" rel="stylesheet">
		<script>
			$(document).ready(function(){
				window.thevideojs = videojs("playbox");
				thevideojs.ABP();
				thevideojs.danmu.load("/static/comment.xml");
			});
		</script>
    </head>
    <body class="video">
        {% include 'partials/topbar.html' %}
		<div ng-controller="videoDataCtrl">
			<div class="row">
				<input type="hidden" value="{{ video_id }}" id="video_id"/>
				<h1>{{video.title}}</h1>
				<video id="playbox" class="video-js vjs-default-skin" controls preload="auto" poster="{{video.cover}}" data-setup='{}' width="100%">
					<source src="" id="playboxUrl" type="video/mp4" />
					<p class="vjs-no-js">
					To view this video please enable JavaScript, and consider upgrading to a web browser
					that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
					</p>
				</video>
				<script>
					$("#playboxUrl").attr("src", "http://" + document.domain + ":8888/" + $("#video_id").val());
				</script>
			</div>

			<div class="row">
				<div class="video-data">
					<a href="/user/ampersand" class="small-4 columns uploader">
						<span class="label">上传人</span>
						<span class="data">{{video.id}}</span>
					</a>
					<a class="small-4 columns likes-count" ng-click="likeVideo()">
						<span class="label">点赞</span>
						<span class="data">{{video.like}}</span>
					</a>
					<div class="small-4 columns views-count">
						<span class="label">观看</span>
						<span class="data">{{video.play_count}}</span>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="medium-3 large-2 columns time">{{video.upload_time | date}}</div>
				<div class="medium-9 large-10 columns description">{{video.description}}</div>
			</div>

			<div class="row">
				<div class="comments">
					<ul class="comments-list">
						<li class="comment-item">
							<div class="author"><a href='/u/ampersand'>ampersand</a></div>
							<div class="time">2014/10/30 6:32 AM</div>
							<div class="content">
	Lorem ipsum dolor sit amet, consectetur adipiscing elit.
							</div>
						</li>
					</ul>
				</div>
			</div>

			<div class="row">
				<div class="comments" ng-repeat="comment in comments">
					<ul class="comments-list">
						<li class="comment-item">
							<div class="author"><a href="#">{{comment.username}}</a></div>
							<div class="time">{{comment.time}}</div>
							<div class="content">
								{{comment.content}}
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>

    </body>
    {% include 'partials/foot.html' %}
</html>
